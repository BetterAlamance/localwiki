{% extends "maps/base.html" %}
{% block media %}
{{ block.super }}
{{ form.media }}

<script type="text/javascript">
    function size_map() {
        $('.mapwidget').height(
            ($(window).height() - $('#header').height() - $('#main_header').height() -
            $('#content_header').height()) - $('#content_footer').height()
        );
    }
    /* Hacky! */
    setTimeout('size_map()', 50);
    $(window).resize(size_map);
</script>
{% endblock %}

{% block title %}Editing map for "{{ form.instance.page.name }}" - {{ block.super }}{% endblock %}

{% block main_wrapper %}
    <div id="main" class="mapdata_detail">
        {% block main %}
            {{ block.super }}
        {% endblock %}
    </div>
{% endblock %}

{% block content %}
    <form method="post" action="">{% csrf_token %}
      {{ form.geom }}
      {{ form.comment }}
      {{ form.version_date }}

      {% block content_footer %}
      <div id="content_footer">
        <div id="editor_actions">
          <input type="submit" value="Save"/>
          <a href=".">Cancel</a>
          {% with form.instance as map %}
            {% include "maps/editor_actions.html" %}
          {% endwith %}
        </div>
      </div>
      {% endblock %}
    </form>
{% endblock %}

{% block edit_action %}
  <li><a href="#" class="button">Edit</a></li>
{% endblock %}
