{% extends "pages/base.html" %}

{% load diff_tags %}
{% load pages_tags %}

{% block media %}
  {{ block.super }}
  <link rel="stylesheet" href="{{ STATIC_URL }}theme/pages/css/diff.css">
  <script type="text/javascript" src="{{ STATIC_URL }}js/jquery/jquery-1.5.min.js"></script>
  <script type="text/javascript" src="{{ STATIC_URL }}theme/pages/js/diff.js"></script>
  {{ page_diff.media }}
{% endblock %}

{% block title %}Differences for {{ new.name }}{% endblock %}
{% block header_title %}Differences for <a href="{% url pages:show slug=page.pretty_slug %}">{{ new.name }}</a>{% endblock %}

{% block content %}
  <div id="page">
    <table width="100%">
      <thead id="content_header">
      {% block content_header %}
          <tr>
              <td class="revision_details">
                  {% if old %}
                    Revision {{ old.version_info.version_number }}
                    ({{ old.version_info.date }}
                    by
                    {% spaceless %}
                    {% if old.version_info.user %}
                        <a href="{{ old.version_info.user.get_absolute_url }}">{{ old.version_info.user }}</a>
                    {% else %}
                        {{ old.version_info.user_ip }}
                    {% endif %}
                    {% endspaceless %})
                  {% endif %}
              </td>
              <td class="revision_details">
                  Revision {{ new.version_info.version_number }}
                  ({{ new.version_info.date }}
                  by
                  {% spaceless %}
                  {% if new.version_info.user %}
                      <a href="{{ new.version_info.user.get_absolute_url }}">{{ new.version_info.user }}</a>
                  {% else %}
                      {{ new.version_info.user_ip }}
                  {% endif %}
                  {% endspaceless %})
              </td>
          </tr>
          <tr>
              <td>
                  <del>Deletions are marked like this</del>
              </td>
              <td>
                  <ins>Additions are marked like this</ins>
              </td>
          </tr>
      </thead>
      {% endblock %}

      <tbody valign="top">
          {% render_page page_diff.content %}
      </tbody>

    </table>
  </div>
{% endblock %}
